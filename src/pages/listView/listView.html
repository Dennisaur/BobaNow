<ion-header>
  <ion-grid>
    <ion-row>
      <ion-col col-4>
        <div class="elementOutline neonDiv" [class.neonDivOn]="openNow" (click)="toggleOpenNow(); refreshLocations();">
          <button ion-button clear class="neonButton" [class.neonButtonOn]="openNow">
            Open Now
          </button>
        </div>
        <div hidden (click)="toggleOpenNow(); refreshLocations();">
          <img class='openSign' src="img/Open.png" [hidden]="!openNow" />
          <img class='openSign' src="img/Closed.png" [hidden]="openNow" />
        </div>
      </ion-col>
      <ion-col col-4>
        <div class="elementOutline">
          <ion-select class="distanceSelect" [(ngModel)]="distance" interface=popover selectedText="Distance" (ngModelChange)="refreshLocations()">
            <ion-option value=1>1 mile</ion-option>
            <ion-option value=5>5 miles</ion-option>
            <ion-option value=10>10 miles</ion-option>
            <ion-option value=25>25 miles</ion-option>
          </ion-select>
        </div>
      </ion-col>
      <ion-col col-4>
        <div class="elementOutline">
          <ion-select class="sortBy" [(ngModel)]="sortBy" interface=popover selectedText="Sort By" (ngModelChange)="refreshLocations()">
            <ion-option value='best_match'>Best Match</ion-option>
            <ion-option value='rating'>Rating</ion-option>
            <ion-option value='distance'>Distance</ion-option>
          </ion-select>
        </div>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-header>

<ion-content class="listContent">
  <div hidden class="straw">

  </div>
  <ion-grid>
    <ion-row text-wrap *ngFor="let bobaLocation of bobaLocations; let i = index"
             (click)="launch(bobaLocation.url)"
             class="elementOutline">
      <ion-col align-self-start col-auto>{{i + 1}}.</ion-col>
      <ion-col class="locationInfo">
        <div class="locationName">
          {{bobaLocation.name}}
        </div>
        <div>
          {{bobaLocation.location.address1}}, {{bobaLocation.location.city}}
        </div>
        <div [hidden]="!bobaLocation.hasHours">
          Hours: {{bobaLocation.openTime | date: 'shortTime'}} - {{bobaLocation.closeTime | date: 'shortTime'}}
        </div>
        <div>
          <img [src]="bobaLocation.ratingImage" class="ratingImage"/>
          <div class="reviewCount">
            {{bobaLocation.review_count}} reviews
          </div>
        </div>
      </ion-col>
      <ion-col col-1 hidden>
        <ion-icon class="timeIcon" name="time"></ion-icon>
      </ion-col>
      <ion-col col-auto>
        <div class="distance">
          {{bobaLocation.distance / 1609.3445 | number:'1.2-2'}} mi
        </div>
        <button ion-button round icon-only (click)="launch(bobaLocation.launchMapsUrl, $event)" class="directionsButton">
          <img src='img/DirectionsIconLightGray.png' class='directionsIcon' />
        </button>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
